<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="chapter">
  
  <insert id="add">
	insert into chapter(
	chapter_no, work_no, chapter_title,
	chapter_detail, chapter_comment,
	chapter_modified, chapter_recent,
	chapter_order)values(
	#{chapterNo},#{workNo},#{chapterTitle},
	#{chapterDetail}, #{chapterComment},
	#{chapterModified}, #{chapterRecent},
	#{chapterOrder})  
  </insert>
  
  <select id="sequence" resultType="int">
  select chapter_seq.nextval from dual
  </select>
    
    <select id="getNextChapterOrder" resultType="int">
        SELECT NVL(MAX(chapter_order), 0) + 1
        FROM chapter
        WHERE work_no = #{workNo}
    </select>
    
  </mapper>
  
  