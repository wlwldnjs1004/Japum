<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="work">

	<!-- 관리자 등록 -->
	<insert id="add">
		insert into work(
		work_no, work_id, work_name,
		work_genre, work_sub_genre,
		work_prefer,
		work_wtime,
		work_paid,
		work_contract,
		work_book,
		work_subtotal
		)
		values
		(
		#{workNo},
		#{workId},
		#{workName},
		#{workGenre},
		#{workSubGenre},
		#{workPrefer},
		#{workWtime, jdbcType=TIMESTAMP},
		#{workPaid},
		#{workContract},
		#{workBook},
		#{workSubtotal}
		)
	</insert>
	<!--일반 회원 등록 -->
		<insert id="add2">
		insert into work(
		work_no,
		work_id, 
		work_name,
		work_genre, 
		work_sub_genre,
		work_prefer,
		work_wtime,
		work_paid,
		work_contract,
		work_subtotal
		)values
		(
		#{workNo},
		#{workId},
		#{workName},
		#{workGenre},
		#{workSubGenre},
		#{workPrefer},
		#{workWtime, jdbcType=TIMESTAMP},
		#{workPaid},
		#{workContract},
		#{workSubtotal}
		)
	</insert>

	<!--  -->
	<select id="sequence" resultType="int">
		select work_seq.nextval from dual
	</select>

	<!-- 목록 조회 -->
	<select id="list" resultType="workDto">
		select * from work order by work_no desc
	</select>


	<select id="viewList" resultType="WorkListViewDto">
		select * from work_list_view
	</select>
	
	<!-- 수정 -->
	<update id="edit"> 
	update work
	set
	work_id=#{workId},
	work_name=#{workName},
	work_genre=#{workGenre},
	work_sub_genre=#{workSubGenre},
	work_paid=#{workPaid},
	work_contract=#{workContract},
	work_subtotal=#{workSubtotal}
	where work_no=#{workNo}
	</update> 
	<!-- 삭제 -->
	 <delete id="delete">
	  delete work where work_no=#{workNo} 
	  </delete>

<!-- 상세 조회 -->
	<select id="find" resultType="workDto">
	select * from work where work_no=#{workNo}
	</select>	

<!-- 뷰 상세 조회 -->
<select id=""></select>


	<insert id="connect">
	insert into work_profile(
	work_no,
	attachment_no)
	values(
	#{workNo},
	#{attachmentNo}
	)
	</insert>

<select id="findProfile" resultType="int">
select attachment_no from work_profile where work_no=#{workNo}
</select>



</mapper>
  
  